# PromoInsta
Promotion instagram bot, based on InstaPy tools.

## Program algorithm

### 1 стадия. Аналитика аккаунта.

#### Анализ хештегов аккаунта.

```python
tags = get_tags(self.browser, url)
```

Если у аккаунта есть фотографии с хештегами, то записываем их в базу по количеству упоминаний.
Если нет, то просим пользователя ввести теги самому или берем самые популярные из сервисов.

### Анализ местоположений у профиля и у постов, если есть
Находим самое частое местоположение или местоположение профиля

## 2 стадия. Работа по расширению аккаунта.

### Общее правило взаимодействия с пользователем

Анализируем профиль человека.
Смотрим последние 5-10 постов (параметр).
Если у этих постов хоть у одного есть необходимых **хэштег** и хоть у одного **местоположение** из списка (если их нет, то одобряем), то **взаимодействуем** с пользователем.


### Работа с базой конкурентов.

### Анализ профиля пользователя

1. Находим теги на последних постах
2. Объединяем теги
3. Сохраняем только уникальные
3. С помощью https://displaypurposes.com/ находим все похожие теги и запоминаем
4. Сохраняем только уникальные

#### Алгоритм работы

1. Находим публикации по тегам по популярности
2. Смотрим профили пользователей
3. Фильтруем аккаунты по схожести
4. Сохраняем аккаунты по схожести и количеству подписчиков, коэффициента подписчики / подписки
5. В результате получаем список аккаунтов конкурентов

** По списку конкурентов можем взаимодействовать с их подписчиками и анализировать их действия в аккаунте (качество публикаций)<br>
** Анализ базы конкурентов должен происходить периодически, а работа со списком подписчиков конкурентов каждый день

#### Оценка схожести аккаунтов

1. Объединение описаний и тегов в единый текстовый блок
2. Попробуем через Jaccard
3. Если схожесть больше порога, то пользователь является предполагаемым конкурентом. Сохраняем в список конкурентов.

Код оценки схожести:
```python
import textdistance

text_1 = 'tag1 ' * 10 + 'tag2 ' * 10 + 'tag3 ' * 10
text_2 = 'tag1 ' * 1 + 'tag2 ' * 1

from sklearn.feature_extraction.text import TfidfVectorizer
from sklearn.metrics.pairwise import cosine_similarity


tfidf_vectorizer = TfidfVectorizer()
tfidf_matrix = tfidf_vectorizer.fit_transform((text_1, text_2))
result_cos = cosine_similarity(tfidf_matrix[0:1], tfidf_matrix)
print(result_cos[0][1])
```


### Работа с местоположениями.

Лайки и комментирование по местоположениям для привлечения новых клиентов, которые находятся в той же локации.

## 3 стадия. Работа с операционкой аккаунта.

### Автоответ на комментарии и лайк.
Определение настроения сообщения и если оно позитивное, то отвечаем и лайкаем, в противном случае нет.
Сообщение переводится на английский и лайкается.

### Аналитика продвижения.
Расчет конверсии, времени подписки и прочей аналитики.

# Functions

## Set filtering posts location by list
Set locations list for filtering

```python
session.set_locations(['Moscow', 'Moscow, Russia'])
```

Inside function check_link each post checks if location (if exist) in list, else post ignored
